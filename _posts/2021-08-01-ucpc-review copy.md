---
layout: single
title:  "SCPC 2021 후기(1차/2차 예선, 본선)"
date:   2021-09-12
categories: 알고리즘
toc: true
---
**SCPC(Samsung Collegiate Programming Contest)** 는 Samsung Research에서 주관하는 프로그래밍(알고리즘 문제 풀이) 대회입니다.  
1차 예선 - 2차 예선 - 본선을 거쳐 총 38인의 수상자를 결정하는데요, 일반적인 대회들과는 다르게 1차/2차는 시간 제한이 크게 없이 진행되고(각각 24시간, 12시간), 본선만 4시간의 시간 제한 하에서 진행이 됩니다.  
대회의 특징이라고 하면 수행시간 제한이 굉장히 타이트하다는 것입니다. 정해와 동일한 시간복잡도의 알고리즘을 구현했음에도 주어진 시간 안에 돌지 못해 제 점수를 받지 못하는 경우도 이따금 있습니다.
(여담으로 입출력에 수행시간이 너무 민감한 것은 개선해주었으면 좋겠습니다. FastIO를 쓰는 이점이 너무 큽니다.)   

<br/>

# 최종 결과
어제 시상식을 끝으로 대회가 막을 내렸는데요, 무려 **5등상**의 좋은 결과로 대회를 마무리하게 되었습니다!
![result](/assets/images/210912/result.png)
중간중간 실수가 없었다면 4등상에도 도전해볼만 했을 것 같아서 조금 아쉽지만, 그래도 개인적으로 많이 발전할 수 있었던 대회였던 것 같아 뿌듯합니다.

실제 대회에서 사용했던 코드는 [github](https://github.com/DHdroid/CP-competitions/tree/master/SCPC/2021) 에 올려두었습니다. 밑에 풀이를 읽으면서 참고하시면 좋을 것 같습니다!

<br/>

# 1차 예선 (2021/07/16)
![preliminary](/assets/image/../images/210912/preliminary.png)
오랫동안 PS를 쉬었기 때문에, 재활하는 느낌으로 가볍게 쳤습니다. 4번의 케이스 커팅이 상당히 귀찮았던 것, 5번의 DSU를 활용하는 아이디어가 흥미로웠던 기억이 납니다.  
항상 대회마다 C스타일의 입출력을 사용하던 제가 처음으로 C++ 스타일의 입출력을 사용한 대회였습니다. std::endl의 사용으로 시간초과를 여러번 받으며 "맞왜틀"을 외치던 기억이 납니다. (std::endl의 출력은 stdout 버퍼를 비워버리기 때문에 알고리즘 대회에서는 '\n'를 사용해 newline을 만드는 것을 권장합니다.)

<br/>

# 2차 예선 (2021/08/07)
## 결과
![2nd_preliminary](/assets/image/../images/210912/2nd_preliminary.png)
역대급으로 좋은 퍼포먼스와 성적으로 예선대회를 마쳤습니다. 대회 도중 코딩 실수를 거의 하지 않았고, 킬러 문제인 5번 문제가 제 전문분야(?)인 Constructive한 문제로 출제되어 최고점의 퍼포먼스를 낼 수 있었습니다.
## 문제 풀이
### 1. 원 안의 점
반지름 R인 원 안의 정수 격자점의 개수를 세는 문제입니다. 경계의 있는 점들만 조심하면 됩니다.

### 2. 직8각형
제가 싫어하는 류의 Brute Force문제였지만, 침착히 구현하여 무난하게 정답을 받았습니다. 처음에 Naive한 8! * 8 이 시간초과를 받아 일부 상수커팅을 해서 만점을 받았습니다(시간제한 너무하네요..).

### 3. 산탄총
사실 2번보다 3번을 먼저 풀었는데요(2번은 풀기 싫게 생겨서 ㅎㅎ), 구하고자하는 점수와 이웃한 격자점을 쐈을 때의 점수의 차이를 대각선 누적합을 통해 O(1)에 관리하는 문제였습니다. 엄청난 코딩 지옥에 빠져서 N번 틀릴 생각에 두려웠었는데, 의외로 1트에 맞아서 스스로도 굉장히 놀랐습니다 ㅋㅋㅋㅋ  
대략 1/2/3번을 모두 해결했을 때 3번 만점자가 14명 정도였고, 굉장히 좋은 페이스로 문제를 해결하고 있다는 걸 알고 식사를 했습니다 :)

### 4. 패턴 매칭
문제를 읽자마자 "아, 이건 내가 모르는 알고리즘일 것이다" 라는 판단과 함께 KMP로 절반을 긁고 넘어갔습니다. 실제로 정해는 아호-코라식이었고, 당시에 저는 모르고 있던 알고리즘입니다.

### 5. Hanoi Tower
엄청 흥미롭게 푼 문제입니다. 원래의 하노이 타워가 각 기둥에서 제일 위에 있는 원판을 빼서 옮기는 문제였다면, 이 문제는 기둥의 원판 중 가운데에 있는 원판을, 다른 기둥의 가운데에 끼우는 행위를 반복해 원판을 모두 옮기는 문제입니다.  
한 기둥에서 제일 밑의 원판과 제일 위의 원판이 없다고 생각합시다. 두 원판이 없다고 생각해도 원판의 이동에는 전혀 영향이 없습니다(중간값의 성질을 생각해보면 쉽습니다). 이 성질을 이용해서 주어진 문제를 작은 subproblem으로 쪼갤 수 있었고, 케이스 커팅이 좀 복잡하긴 했지만 재귀적으로 문제를 해결하는 코드를 작성할 수 있었습니다.  
문제의 만점 조건에는 약간 모자라긴 했지만, N=25까지의 케이스를 해결하며 최고 득점자와 동점을 받을 수 있었습니다.

<br/>

# 본선 (2021/09/04)
## 본선 키트
본선 전에 삼성 리서치에서 택배로 본선 키트를 보내주셨습니다!
![kit](/assets/images/210912/kit.png)
이걸 받으니 뭔가 정말 대단한 대회에 출전한 것만 같은 생각이 들어 두근두근했습니다. 조금 아쉬운 것이 있다면 SCPC 혹은 Samsung Research가 적힌 티셔츠가 있었으면 더욱 알찼을 것 같습니다.

## 진행 방식
본선 역시 온라인으로 진행이 되었는데요, 부정행위 방지를 위해 감독을 철저히 합니다. 핸드폰으로 스마트폰을 거치한채로 얼굴/양손/모니터가 전부 나오도록 영상을 송출해야 하고, 대회 환경도 삼성 측에서 제공하는 VDI로 한정돼 있습니다. 이 때문에 늘 사용하던 IDE나 에디터를 사용하지 못해서 1~2주간 윈도우 환경의 CodeBlocks로 연습을 하기도 했습니다.

## 결과
![final](/assets/images/210912/final.png)

2솔로 대회를 마무리 했습니다. 1번 솔루션을 굉장히 빨리 떠올렸는데, 엄청 간단한 케이스를 놓쳐 AC를 받는데 많은 시간을 쓴 것이 아쉽게 느껴집니다.

## 문제 풀이
### 1. 최솟값, 중앙값, 최댓값
2KM+1 개의 수가 있을 때, 2K+1 개의 수를 골라 최댓값만 빼고 다 지우거나, 중앙값만 빼고 다 지우거나, 최솟값만 빼고 다 지우는 3개의 operation을 M번 반복해서 1개의 수를 남기고자 합니다. 이때 쿼리로 들어온 정수들에 대해서 그 수를 남길 수 있는지, 남길 수 있다면 최소 cost는 얼마인지 구하는 문제입니다.  
주어진 수들을 쿼리로 들어온 수보다 작은 수와 큰 수로 나눕시다. M=1인 경우는 잘 처리해주면 되고, M>=2인 경우에는 몇몇 케이스를 제외하고는 일반적으로 원하는 operation으로 원하는 그룹에서 원하는 개수의 수를 지울 수 있습니다. 이를 이용해서 케이스를 잘 따져가며 그리디하게 풀 수 있는 문제였습니다만... 수들이 중복해서 존재할 수 있다는 사실을 놓쳐서 맞왜틀을 1시간 동안 했던 문제입니다 ㅠㅠ  
2시간 정도에 AC를 받았습니다.

### 3. 1등 단어
주어진 단어 A를 shift해서(banana -> ananab) 나올 수 있는 모든 단어들을 사전 순으로 나열했을 때, 첫 번째로 오는 단어 B를 생각합시다. A와 B가 같고, B를 만들 수 있는 방법이 유일하면(shift를 0번 하는 것) A를 '1등 단어'라 합니다. 어떤 단어 C가 주어졌을 때, C를 사전 순으로 감소하는 1등 단어들의 sequence로 쪼개는 것이 문제입니다.  
Suffix Array를 활용하면 생각보다 쉽게 풀립니다. Suffix Array의 역함수를 만들고, 앞에서부터 그 역함수의 최솟값이 갱신되는 지점마다 잘라주면 1등 단어들의 sequence가 완성됩니다. Manber-Myers를 이용해서 구현했는데, 시간초과가 나는 바람에 당황했습니다. 다행히 사소한 계산들을 전부 커팅해주니 0.95초로 1초의 제한 안에 들어가면서 종료 20분을 남기고 만점을 받을 수 있었습니다.

2문제를 맞춘 후에는 산탄총2를 긁으려고 노력했으나, TLE를 받고 대회를 마치게 되었습니다.

## 본선 대회를 마치고
사실 대회를 치고 나서는 "망했다" 라는 생각밖에 안들었습니다. 1번/3번을 구현하면서 자잘한 구현실수를 너무 많이 해서 최고 실력에 한참 못미치는 퍼포먼스를 낸 것 같은 느낌이었습니다. 그런데 만점자 수와 중복 수상 불가 인원들을 고려했을 때 5등상 정도는 받을만하다는 생각이 들어 조금의 기대를 안고 있었는데 실제로 5등상을 받게 되어 너무 기쁩니다 ㅎㅎ

<br/>

# 리뷰
대회를 준비하면서 이전에 몰랐던 고급 알고리즘들을 이것저것 공부하게 되어서 개인적으로 정말 많은 발전이 있었던 대회인 것 같습니다. UCPC 본선을 망해버려서 의기소침해져 있었는데, 조금은 자신감을 회복할 수 있었습니다.  
하지만 대회가 2달에 걸쳐 진행되고, 예선 대회 진행시간이 상당히 길어 체력적으로 부담이 되는 대회였던 것 같습니다. SNUPC에 참가하지 않은 것도 SCPC가 끝나고 생긴 약간의 번아웃의 여파입니다.  
그럼에도 여전히 재밌는 대회임에는 틀림이 없는 것 같습니다(수행시간 제한 빼고). 문제 유형도 제가 좋아하는 방향으로 많이 나오는 것 같아서 앞으로 매년 참가하게 될 것 같습니다. 내년에는 3등상 이상을 목표로 대회를 준비해보려 합니다. 2~5등 상은 중복수상 횟수가 2회로 제한돼있기 때문에 최선을 다해 최고의 결과를 내고 싶네요 ㅎㅎ



