---
layout: single
title:  "UCPC 2021 예선 후기"
date:   2021-08-01
categories: 알고리즘
toc: true
---



바로 어제, UCPC 2021의 인터넷 예선이 진행되었습니다. 이번 대회에는 약간의 멤버 변화가 있었는데요, 늘 함께하던 gratus907 대신 sanggggg가 합류해서 저, coffeetea, sanggggg의 3인 1팀 체제로 대회를 치루게 되었습니다!  

## 팀 결성
사실 이렇게 된 건 UCPC가 3인 1팀 대회이기 때문인데요, Google HashCode를 인연으로 같이 공부하던 4인조(dhdroid, coffeetea, gratus907, dlwocks31)가 1팀으로 나갈 수 없는 상황이기 때문에 2명/2명으로 가른 다음, 각각이 새로운 팀원 1명을 구해보는 것으로 결정했습니다.  PS라는 것이 개인기량도 물론이지만 팀워크와 소통이 굉장히 중요한 요소라고 생각했기 때문에, PS에 어느정도 관심이 있으면서도 평소에 친하게 지내던 sanggggg를 꼬셔보았고, 흔쾌히 응해주어 팀을 구성하게 되었습니다 ㅎㅎ   
팀 이름은 'UCPC에 참가했으면 최선을 다한다' 인데, 처음에는 특이하지만 의지를 드러낼 수 있는 좋은 이름이라 생각해서 동의했으나 나중에 알고보니 '덕'의 냄새가 풍기는 이름이었습니다 ㅋㅋ


## 연습 과정
조금은 급조된 팀이다 보니 첫 연습은 끔찍(?)했습니다. 개개인의 퍼포먼스보다도 오히려 팀 퍼포먼스가 안나오는 느낌이 있었고, 다들 PS공부에 집중하지 못했던 상황 때문에 전체적으로 솔빙 및 구현 능력이 매우 떨어져 있었습니다.   
그래도 점점 개인 연습과 팀 연습을 병행하다 보니 팀원 모두의 퍼포먼스가 좋아지는 것 같은 느낌이 들었고, 서로의 장단점을 파악하고 문제를 배분하는 능력도 점점 좋아지는 것을 느꼈습니다. 온라인 단기 연습 셋으로 USACO Gold를 골라 진행했었는데, 대회 직전에는 목표 시간의 절반만에 모든 문제를 풀어내어 뿌듯했던 기억도 있습니다.

## 결과
![result](/assets/images/210805/result.png)  
10등대 진입을 꿈꿨지만, 아쉽게 8솔 21위로 예선을 마무리했습니다! 그래도 매년 대회 참가자들의 수준이 우상향 중인 것을 생각해보면 나쁘지 않은 성적이라고 생각합니다 ㅎㅎ

## 타임라인
시작하자마자, 미리 얘기해둔대로 coffeetea는 ABCD를, sanggggg는 EFG를, 저는 HIJ를 읽기 시작했습니다. 바로바로 코딩에 들어갈 정도로 쉬운문제는 바로 풀고, 그렇지 않은 경우에는 모든 문제를 읽는 것에 집중하기로 했습니다.    

---

### A. 수학은 체육과목 입니다 3 (00:10 AC, silver5)
매해 UCPC 예선의 A번은 브론즈 수준의 쉬운 문제가 나온다는 것을 대충 알고 있었고, 실수 없이 코딩하는 것에 능한 coffeetea가 A를 빠르게 밀었습니다.

---

### H. 스키장 (00:21 AC, gold2)
HIJ를 읽은 후, dp의 냄새가 나는 H를 잡았습니다. topological order로 dp table을 갱신하기만 하면 되는 쉬운 문제였습니다.  

---

### C. 헤이카카오 (00:35 AC, silver2)
ABC를 모두 읽은 coffeetea가 "C는 확률 문제고, 대충 ~~로 풀면 될 것 같다." 라고 하는 것을 듣고 제가 C를 잡겠다고 얘기했고, 어렵지 않게 AC를 받았습니다. 

---

### B. 항체 인식 (00:47 AC, gold5)
저에게 C를 넘겨준 coffeetea가 B를 혼자 잡더니 풀어버렸습니다. 솔루션은 간단하지만 구현이 다소 귀찮았던 flood-fill 문제로 보입니다.

---

쉬운 문제 4문제를 큰 무리 없이 해결한 상황에서, 스코어보드를 보니 D와 G가 비교적 많이 해결돼 있었습니다. 제가 G를, 나머지 두 팀원이 D를 고민하기 시작했습니다.

--- 

### G. 경품 추첨 (01:01 AC, platinum4)
k개의 상자에 N개의 숫자가 담겨 있습니다. 이중 2개의 상자를 고르고, 각 상자에서 1개의 숫자를 골라 그 합을 계산합니다. 이때, 어떤 2개의 상자를 고르더라도 모든 합이 유일하도록(가능한 숫자의 합이 N^2개 이도록) k개의 상자에 각각 알맞은 N개의 숫자를 넣어 출력하는 것이 문제입니다.  
문제를 처음 읽은 sanggggg가 간단한 관찰들과 문제 설명을 해주었고, 이런 constructive한 문제는 전통적으로(?) 제가 강한 편이라 바로 잡았습니다. 처음에는 아예 감이 안잡혔는데, '모든 상자에 등차수열을 넣는다'로 사고를 좁히니 소수를 이용하면 쉽게 해결할 
수 있는 문제였습니다. 고민없이 코딩했고, AC를 받았습니다.

---

### D. 돌 가져가기 (01:20 AC, platinum3)
흰색, 혹은 검은색의 돌이 일렬로 놓여있습니다. 각 돌에는 무게가 있고, 이 돌을 하나씩 치울 것입니다. 이때, 돌을 치우는 순간 해당 돌의 양쪽에 모두 그 돌의 색깔과 다른 돌이 있는 경우에는 그 돌의 무게에 해당하는 점수를 얻습니다. 얻을 수 있는 최대 점수를 구하는 것이 문제입니다.  
coffeetea와 sanggggg가 고민 중이었고, 둘이 내놓은 풀이는 '그리디' 였습니다. 저는 약간의 의심에 여러가지 corner case들을 제시해 보았는데, 결론적으로 해보면 해볼 수록 예외없이 그리디 풀이가 유효하다는 확신에 도달하게 되었습니다. 제가 잡았으면 되게 오래걸렸을 것 같은데, 다른 팀원들이 빠르게 해결해주어서 고마웠던 문제입니다.

---

6문제를 해결하고 나니, 본선 진출에는 일단 성공했다는 생각이 들었습니다. 그래도 남은 문제를 최선을 다해서 해결하자는 생각이 들어 저와 coffeetea는 E를, sanggggg는 I를 잡고 풀기 시작했습니다.

---

### E. 말뚝 (02:13 AC, platinum1)
N개의 말뚝이 있습니다. 이중 연속한 k개를 같은 높이로 맞추고 싶습니다. i번째 말뚝의 높이를 1 증가시키는데에는 A_i의 힘이, 1 감소시키는데에는 B_i의 힘이 소모됩니다. 필요한 힘의 최솟값을 구하는 문제입니다.  
문제를 읽고 convex hull trick과 유사하다는 느낌을 강하게 받았습니다. k개의 말뚝을 같은 높이 h로 만드는데 필요한 힘을 h에 대한 함수 f(h)로 나타내보고자 했습니다. 그러자 다음과 같은 사실들을 관찰할 수 있었습니다.

1. 말뚝이 하나 추가되는 것은 V자 모양의 함수가 더해지는 것과 같다.
2. f(h)는 h가 커질수록 기울기가 점점 증가하는, 아래로 볼록한 함수이다.

1번으로부터 segment tree with lazy propagation으로 기울기와 y offset을 관리할 수 있다는 것을 깨달았고, 2번으로부터 삼분탐색으로 극솟점을 찾을 수 있다는 것을 알아내었습니다.  이러한 방법을 사용해 log 단위의 복잡도로 f(h)를 모델링할 수 있다면, 그냥 sliding window로 최소 cost를 찾기만 하면 되는 것이었습니다.  
솔루션을 떠올린 과정도 좋았지만, 코딩하는 과정도 굉장히 좋았던 것 같습니다. coffeetea가 segment tree를 금방 코딩해주었고, 저는 segment tree만 있으면 쓸 수 있는 skeleton을 작업했습니다.  
우려와는 다르게 딱 한 번 WA를 받고 AC를 받았고, 분위기가 굉장히 고조되었던 것 같습니다.

---

### I. 흔한 타일 색칠 문제 (02:13 AC, platinum2)
sanggggg가 혼자 풀어버린 문제입니다. 2^k by 2^k 타일에서 한개의 타일을 제거했을 때 남은 공간을 L모양의 도형으로 채우는 문제입니다. 처음 문제를 읽었던 것은 저였지만, 답도 없는 구현/케이스 커팅 문제라고 생각해서 포기하고 있었습니다. 그런데 혼자 차근차근 construction을 정리하더니 대뜸 풀어버렸습니다. 역시 1번의 WA만 받고 맞아서 놀라웠던 문제입니다.

---

여기까지 풀고 47분이 남은 상태에서 F는 대충 FFT인 것 같고, J는 small-to-large인 것 같다 라는 얘기가 돌고 있었습니다(결론적으로 둘 다 큰 틀에서는 맞는 얘기였습니다). sanggggg가 어느정도 F에 대해 아이디어가 있어 보여 F 코딩을 들어갔지만, 살짝 틀린 조건이 있어서 맞는데에는 실패했습니다. 그래도 8솔이나 했다는 사실에 매우 격양돼있었고, 화기애애하게 대회를 마쳤습니다 ㅎㅎ

## 소감
전체적으로 훌륭한 팀워크와 개인기량으로 팀원들 모두가 만족할만한 예선을 치른 것 같습니다. 하지만, 여전히 더 잘할 수 있을 것 같다는 생각이 듭니다. 본선 수상권을 노릴 수 있도록 남은 기간 더 열심히 준비해보겠습니다 ㅎㅎ